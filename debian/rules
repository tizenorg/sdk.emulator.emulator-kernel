#!/usr/bin/make -f

package=samsung-sdk-simulator

ARM_KERNEL = arm-kernel
CC     = gcc

export DH_VERBOSE=1

build:
	$(MAKE) bzImage
#	cd $(CURDIR)/$(INITRD_SRCDIR) && $(MAKE)
binary:

clean:
	dh_testdir
	dh_clean
	rm -rf debian/tmp debian/files* debian/substvars
	rm -f build
	$(MAKE) clean

install: build
	dh_clean
	dh_installdirs
	mkdir -p $(CURDIR)/debian/tmp/opt/samsung_sdk/simulator/data/kernel-img
	cp -f $(CURDIR)/arch/x86/boot/bzImage $(CURDIR)/debian/tmp/opt/samsung_sdk/simulator/data/kernel-img/
	cp -f $(CURDIR)/$(ARM_KERNEL)/* $(CURDIR)/debian/tmp/opt/samsung_sdk/simulator/data/kernel-img/

binary-arch: install
	dh_testdir -a
	dh_testroot -a
	dh_strip -a
	dh_compress -a
	dh_fixperms -a
	dh_installdeb -a
	dh_shlibdeps -a
	dh_gencontrol -a
	dh_md5sums -a
	dh_builddeb -a

binary: binary-indep binary-arch

.PHONY: binary binary-arch binary-indep clean checkroot
